# 前端样式规范文档

为确保前端代码风格统一与开发效率，特制定本规范。规范聚焦“通用部分”（变量、混入、基础样式、布局骨架、全局引入与用法），不包含组件样式与业务颜色体系。

## 1. 核心原则

- **CSS 变量驱动**：颜色、间距、字体、阴影、层级、过渡、断点等统一由 CSS 变量控制。
- **颜色优先原则**：优先使用 `variables.scss` 中已定义的主题色。仅当特定组件的设计需求无法被现有颜色满足时，才应在组件内定义局部颜色变量或在 `variables.scss` 中新增全局变量。
- **模块化聚合**：所有样式通过 `src/assets/styles/index.scss` 统一入口管理与对外转发。
- **组件内语义样式**：组件样式写在对应 Vue 组件的 `<style scoped>` 中，使用设计令牌（`var(--*)`）与混入（`@include respond-to(...)`），不依赖通用工具类。
- **BEM 命名**：组件内部样式遵循 BEM（`.block__element--modifier`）。
- **业务样式分离**：页面或业务样式仅在组件内书写，不污染全局。

## 2. 变量系统

所有设计规范相关的变量在 `variables.scss` 中定义并挂载到 `:root`。变量涵盖：

- 主题与功能色：`--primary-color`、`--success-color`、`--warning-color`、`--danger-color`、`--info-color`
- 文本色：`--text-primary`、`--text-secondary`、`--text-tertiary`、`--text-disabled`
- 背景色：`--bg-primary`、`--bg-secondary`、`--bg-tertiary`、`--bg-overlay`
- 布局尺寸：`--header-height`、`--sidebar-width`、`--container-max-width`
- 字体系统：`--font-family-base`、`--font-size-base`、`--font-weight-*`、`--line-height-*`
- 间距系统：`--spacing-mini`、`--spacing-small`、`--spacing-base`、`--spacing-large`、`--spacing-xl` 等
- 圆角与阴影：`--border-radius-*`、`--box-shadow-*`
- 层级与过渡：`--z-index-*`、`--transition-*`
- 响应式断点：`--breakpoint-sm`、`--breakpoint-md`、`--breakpoint-lg`、`--breakpoint-xl`、`--breakpoint-2xl`

## 3. 文件组织与模块化

样式系统采用模块化结构，由 `index.scss` 作为唯一入口进行聚合与转发。

### 目录结构

```
vue/src/assets/styles/
├── index.scss            // 统一入口（唯一需要在入口文件中引入）
├── variables.scss        // 全局 CSS 变量（设计令牌）
├── mixins.scss           // 全局 SCSS 混入（响应式等）
└── base/
    ├── reset.scss        // 基础样式重置（非激进式，专注兼容性与标准化）
    └── animations.scss   // 动画与过渡（仅包含 keyframes，不提供任何全局类）
```

### 统一入口：`index.scss`

`index.scss` 负责对外转发变量、混入，并聚合基础样式与布局骨架。顶部必须使用 `@forward`。

```scss
// 1) 转发变量与混入
@forward "./variables.scss";
@forward "./mixins.scss";

// 2) 自身可用与模块聚合
@use "./variables.scss" as *;
@use "./mixins.scss" as *;

// 基础样式
@use "./base/reset.scss";
@use "./base/animations.scss";
```

### 全局引入约定

- 全局样式仅在入口文件中引入一次：
  - `vue/src/main.js` 中引入 `@/assets/styles/index.scss`
- 在组件内需要使用变量或混入时，通过 `@use` 使用入口文件的导出能力；不再依赖通用工具类类名。

## 4. 组件样式实践

在任何 Vue 组件中，如需使用变量、混入，通过 `@use "@/assets/styles/index.scss" as *;` 引入样式入口文件。组件样式应遵循 BEM 命名规范，使用 CSS 变量表达颜色、间距、字体等设计令牌，通过混入实现响应式布局。样式通过变量与混入表达，不提供 nor 使用通用工具类。组件样式遵循 BEM 命名与单文件内高内聚。

## 5. 核心功能用法

### 响应式设计（混入）

使用 `respond-to` 混入可以在不同断点下应用不同的样式规则。该混入接受断点参数（如 sm、md、lg 等），根据屏幕尺寸自动应用相应的样式。适用于需要在不同设备上展示不同布局或样式的场景。

### 图标系统（Font Awesome@4.7.0）

项目通过 CDN 引入 Font Awesome@4.7.0图标库，提供丰富的矢量图标集。图标通过`fa`前缀类名系统调用，支持尺寸、颜色、动画等修饰符。图标颜色遵循 CSS 变量系统，优先使用`var(--text-*)`、`var(--primary-color)`等主题变量。图标尺寸通过`fa-lg`、`fa-2x`等修饰符控制，或直接使用 CSS 变量`var(--font-size-*)`自定义。

## 6. 常见问题与解决方案

### 1) 样式导入路径错误

- 症状：编译失败，报告文件未找到
- 解决：使用 `@` 别名（已在 `jsconfig.json` 配置）统一从 `src` 开始
  ```scss
  @use "@/assets/styles/index.scss" as *;
  ```

### 2) Sass 模块系统配置错误

- 症状：变量可用但混入不可用，或提示 `Undefined mixin`
- 原因：入口文件未通过 `@forward` 转发 `mixins.scss`
- 解决：确保 `index.scss` 顶部包含：
  ```scss
  @forward "./variables.scss";
  @forward "./mixins.scss";
  ```
- 注意：子模块若直接使用 mixin，但未通过入口暴露，需要在文件顶部添加：
  ```scss
  @use "@/assets/styles/mixins.scss" as *;
  ```

### 3) Sass 弃用警告（数学运算）

- 症状：`Deprecation Warning [slash-div]`、`[global-builtin]`
- 解决方案：
  1. 在使用数学函数的文件顶部导入 math 模块：
     ```scss
     @use "sass:math";
     ```
  2. 替换弃用语法：
     ```scss
     // 旧：percentage($i / 12)
     // 新：math.percentage(math.div($i, 12))
     ```
- 影响文件：主要为 `mixins.scss`
- 注意：每个使用 `math` 的文件都需单独导入

## 7. 开发场景自查清单

- **进行响应式布局或适配不同屏幕尺寸时** → 查看 `vue/src/assets/styles/mixins.scss` 中定义的 `respond-to` 混入。
- **需要统一颜色、间距、字体、圆角或阴影时** → 查看 `vue/src/assets/styles/variables.scss`，使用其中已定义的 CSS 变量。
- **需要添加或调整全局动画效果（关键帧）时** → 查看 `vue/src/assets/styles/base/animations.scss`。
- **排查基础样式、浏览器兼容性或边距重置问题时** → 查看 `vue/src/assets/styles/base/reset.scss`。
- **确认样式入口、模块导入路径或 Vite 别名配置时** → 查看 `vue/src/assets/styles/index.scss`、`vue/src/main.js` 和 `vue/vite.config.js`。

## 8. 关键边界

- 全局不提供通用工具类（`utils/*` 已移除）；组件不得引入或定义全局工具类。
- 颜色、间距、阴影、过渡等仅通过 CSS 变量表达。
- 断点仅在 `mixins.scss` 修改；`variables.scss` 中断点变量仅用于统一展示与 JS 端消费。
- 动画类已下线，仅保留 keyframes 与变量化过渡时间；组件内自行声明 transition/animation。

---

本规范与当前项目实现一一对应：以变量与混入为核心，保留应用布局骨架与基础样式，不包含任何通用工具类体系。
